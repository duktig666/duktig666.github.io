(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{444:function(t,a,e){"use strict";e.r(a);var r=e(3),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[t._v("随着Web3发展趋势逐渐上升，Solidity这门智能合约编程语言的需求也在逐日增高，本文主要讲述Solidity入门主要需要的资源。")])]),t._v(" "),a("h1",{attrs:{id:"solidity-入门资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solidity-入门资源"}},[t._v("#")]),t._v(" Solidity 入门资源")]),t._v(" "),a("h2",{attrs:{id:"solidity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solidity"}},[t._v("#")]),t._v(" Solidity")]),t._v(" "),a("p",[t._v("中文文档："),a("a",{attrs:{href:"https://learnblockchain.cn/docs/solidity/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://learnblockchain.cn/docs/solidity/"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"智能合约框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约框架"}},[t._v("#")]),t._v(" 智能合约框架")]),t._v(" "),a("ul",[a("li",[t._v("Foundry："),a("a",{attrs:{href:"https://book.getfoundry.sh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://book.getfoundry.sh/"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("使用原生solidity编写部署和测试，更接近EVM底层")]),t._v(" "),a("li",[t._v("rust实现，快 ，测试可以直接观察堆栈和每一个方法的调用以及gas消耗")]),t._v(" "),a("li",[t._v("更加好用")])])]),t._v(" "),a("li",[t._v("Hardhat："),a("a",{attrs:{href:"https://hardhat.org/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hardhat.org/docs"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("需要使用ethers.js编写部署和测试的脚本")]),t._v(" "),a("li",[t._v("老牌框架，社区和生态更加友好")])])])]),t._v(" "),a("p",[t._v("但是两个框架也可以混用，建议先搭建Hardhat，然后集成Foundry："),a("strong",[a("a",{attrs:{href:"https://book.getfoundry.sh/config/hardhat#integrating-with-hardhat",target:"_blank",rel:"noopener noreferrer"}},[t._v("与 Hardhat 集成"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"智能合约库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约库"}},[t._v("#")]),t._v(" 智能合约库")]),t._v(" "),a("p",[t._v("openzeppelin: "),a("a",{attrs:{href:"https://docs.openzeppelin.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.openzeppelin.com/"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("可升级合约仓库：https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable")]),t._v(" "),a("li",[t._v("不可升级合约仓库：https://github.com/OpenZeppelin/openzeppelin-contracts")])]),t._v(" "),a("h2",{attrs:{id:"合约升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合约升级"}},[t._v("#")]),t._v(" 合约升级")]),t._v(" "),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("p",[t._v("可升级合约和不可升级合约。")]),t._v(" "),a("p",[t._v("特性：代码一旦部署，就将确定下来，不可更改。")]),t._v(" "),a("p",[t._v("但是如果合约有bug，或者不完善，怎么办？")]),t._v(" "),a("p",[t._v("提出了可升级合约，可以升级部分代码。")]),t._v(" "),a("h3",{attrs:{id:"升级规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级规则"}},[t._v("#")]),t._v(" 升级规则")]),t._v(" "),a("p",[t._v("对于可升级合约，在编写新版本的逻辑合约时：")]),t._v(" "),a("ol",[a("li",[t._v("不能更改状态变量的类型")]),t._v(" "),a("li",[t._v("不能更改声明状态的顺序")]),t._v(" "),a("li",[t._v("不能删除现有状态变量")]),t._v(" "),a("li",[t._v("不能在现有状态变量之前引入新的状态变量")])]),t._v(" "),a("p",[t._v("能对状态变量做的修改，差不多就仅是 “在以前状态变量后面增加新的状态变量了”。")]),t._v(" "),a("p",[t._v("总结：新增变量，函数都可以增删改。")]),t._v(" "),a("h3",{attrs:{id:"可升级合约的编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可升级合约的编写"}},[t._v("#")]),t._v(" 可升级合约的编写")]),t._v(" "),a("p",[t._v("参看："),a("a",{attrs:{href:"https://blog.logrocket.com/using-uups-proxy-pattern-upgrade-smart-contracts/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.logrocket.com/using-uups-proxy-pattern-upgrade-smart-contracts/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("一般会使用uups升级智能合约，使用UpgradeableBeacon来升级工厂合约创建的合约。")]),t._v(" "),a("h2",{attrs:{id:"智能合约调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约调用"}},[t._v("#")]),t._v(" 智能合约调用")]),t._v(" "),a("h3",{attrs:{id:"js-ts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-ts"}},[t._v("#")]),t._v(" JS/TS")]),t._v(" "),a("p",[t._v("ethers.js（官方）: "),a("a",{attrs:{href:"https://learnblockchain.cn/ethers_v5/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://learnblockchain.cn/ethers_v5/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("web3.js: "),a("a",{attrs:{href:"https://learnblockchain.cn/docs/web3.js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://learnblockchain.cn/docs/web3.js/"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"golang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#golang"}},[t._v("#")]),t._v(" golang")]),t._v(" "),a("p",[t._v("go-ethereum(geth):")]),t._v(" "),a("ul",[a("li",[t._v("文档："),a("a",{attrs:{href:"https://geth.ethereum.org/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://geth.ethereum.org/docs"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("github：https://github.com/ethereum/go-ethereum")])]),t._v(" "),a("h2",{attrs:{id:"智能合约交易模拟和分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约交易模拟和分析"}},[t._v("#")]),t._v(" 智能合约交易模拟和分析")]),t._v(" "),a("ul",[a("li",[t._v("Tenderly：https://dashboard.tenderly.co/\n"),a("ul",[a("li",[t._v("可进行交易模拟")]),t._v(" "),a("li",[t._v("分析链上交易的堆栈和报错调试")])])])]),t._v(" "),a("h2",{attrs:{id:"编辑器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编辑器"}},[t._v("#")]),t._v(" 编辑器")]),t._v(" "),a("p",[t._v("在线remix："),a("a",{attrs:{href:"http://remix.ethereum.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://remix.ethereum.org/"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"eth区块浏览器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eth区块浏览器"}},[t._v("#")]),t._v(" ETH区块浏览器")]),t._v(" "),a("ul",[a("li",[t._v("执行层 etherscan：https://etherscan.io/")]),t._v(" "),a("li",[t._v("共识层 beaconcha：https://beaconcha.in/")])]),t._v(" "),a("h2",{attrs:{id:"eth节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eth节点"}},[t._v("#")]),t._v(" ETH节点")]),t._v(" "),a("p",[t._v("api文档：")]),t._v(" "),a("ul",[a("li",[t._v("执行层："),a("a",{attrs:{href:"https://ethereum.github.io/execution-apis/api-documentation/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ethereum JSON-RPC"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("共识层："),a("a",{attrs:{href:"https://ethereum.github.io/beacon-APIs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Beacon-API"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("节点：")]),t._v(" "),a("ul",[a("li",[t._v("infura："),a("a",{attrs:{href:"https://www.infura.io/zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.infura.io/zh"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Alchemy: "),a("a",{attrs:{href:"https://www.alchemy.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.alchemy.com/"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("例如请求账户余额：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" POST "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type: application/json'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"jsonrpc":"2.0","method":"eth_getBalance","params":["<YOUR ADDRESS>",<BLOCK(finalized)>],"id":1}\'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("YOUR ETH Execution layer http ADDR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("infura"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\nwebsocat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("YOUR ETH Execution layer websocket ADDR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("infura"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsonrpc"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eth_getBalance"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"params"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<YOUR ADDRESS>"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("BLOCK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("finalized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=s.exports}}]);